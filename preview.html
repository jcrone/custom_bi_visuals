<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Power BI Custom Visuals — Preview</title>
<style>
  :root {
    --brand-blue: #00539A;
    --brand-blue2: #004896;
    --brand-gold: #FDB945;
    --brand-navy: #11284C;
    --bg: #F6F8FB;
    --card-bg: #FFFFFF;
    --border: #D9E1EA;
    --text-muted: #6B7F93;
    --text-secondary: #3E556E;
    --kpi-positive: #0E7C3A;
    --kpi-negative: #B42318;
    --font: "Segoe UI", system-ui, -apple-system, Arial, sans-serif;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: var(--font);
    background: var(--bg);
    color: var(--brand-navy);
    padding: 40px;
  }

  h1 {
    font-size: 22px;
    font-weight: 700;
    color: var(--brand-navy);
    margin-bottom: 6px;
  }

  .subtitle {
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 32px;
  }

  .section-label {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    color: var(--brand-blue);
    margin-bottom: 14px;
    padding-bottom: 6px;
    border-bottom: 2px solid var(--brand-gold);
    display: inline-block;
  }

  /* ── Single KPI Card ── */
  .single-cards-row {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
    margin-bottom: 48px;
  }

  .kpi-card {
    flex: 1 1 200px;
    max-width: 260px;
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px 22px 14px;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-shadow: 0 1px 3px rgba(0,0,0,0.06);
    transition: box-shadow 0.15s ease;
  }
  .kpi-card:hover { box-shadow: 0 4px 14px rgba(0,0,0,0.10); }

  .kpi-card__title {
    font-size: 11px;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.6px;
    margin-bottom: 6px;
  }

  .kpi-card__value {
    font-size: 34px;
    font-weight: 700;
    color: var(--brand-navy);
    line-height: 1.1;
    margin-bottom: 6px;
  }

  .kpi-card__variance {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 10px;
  }
  .kpi-card__variance.pos { color: var(--kpi-positive); }
  .kpi-card__variance.neg { color: var(--kpi-negative); }

  .kpi-card__variance .target {
    font-size: 11px;
    font-weight: 400;
    color: var(--text-muted);
    margin-left: 4px;
  }

  .kpi-card__sparkline {
    width: 100%;
    height: 40px;
    margin-top: auto;
  }

  /* ── Multi KPI Grid ── */
  .multi-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.06);
  }

  .mini-card {
    flex: 1 1 130px;
    min-width: 110px;
    max-width: 200px;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: box-shadow 0.15s ease;
  }
  .mini-card:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.08); }

  .mini-card__title {
    font-size: 10px;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
  }

  .mini-card__value {
    font-size: 22px;
    font-weight: 700;
    color: var(--brand-navy);
    line-height: 1.1;
    margin-bottom: 4px;
  }

  .mini-card__variance {
    display: flex;
    align-items: center;
    gap: 3px;
    font-size: 11px;
    font-weight: 600;
  }
  .mini-card__variance.pos { color: var(--kpi-positive); }
  .mini-card__variance.neg { color: var(--kpi-negative); }

  .arrow { font-size: 9px; }

  /* ── Footer ── */
  .footer {
    margin-top: 48px;
    font-size: 11px;
    color: var(--text-muted);
    text-align: center;
  }
  .swatch-row {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin-top: 8px;
  }
  .swatch {
    width: 18px; height: 18px;
    border-radius: 4px;
    border: 1px solid var(--border);
  }

  /* ── Date Slicer ── */
  .ds-preview-wrapper {
    display: flex;
    flex-direction: row;
    width: 520px;
    height: 340px;
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0,0,0,0.06);
    font-family: var(--font);
    font-size: 12px;
    color: var(--brand-navy);
    opacity: 0;
    transform: translateY(18px);
    animation: cardIn 0.5s ease forwards;
    animation-delay: 0.1s;
  }
  .ds-preview-wrapper:hover { box-shadow: 0 4px 14px rgba(0,0,0,0.10); }

  .ds-prev-sidebar {
    display: flex;
    flex-direction: column;
    gap: 3px;
    width: 145px;
    padding: 12px 10px;
    border-right: 1px solid var(--border);
    background: var(--bg);
  }
  .ds-prev-toggle-row {
    display: flex; align-items: center; gap: 6px; margin-bottom: 6px;
  }
  .ds-prev-toggle-row input[type="checkbox"] {
    accent-color: var(--brand-blue); width: 15px; height: 15px;
  }
  .ds-prev-toggle-row span { font-weight: 600; font-size: 12px; }

  .ds-prev-preset {
    display: block; width: 100%; padding: 4px 8px;
    border: none; border-radius: 4px; background: transparent;
    color: var(--brand-blue); font-family: var(--font);
    font-size: 12px; font-weight: 600; text-align: left; cursor: pointer;
    transition: background 0.15s;
  }
  .ds-prev-preset:hover { background: rgba(0,83,154,0.10); }
  .ds-prev-preset.active { background: rgba(253,185,69,0.22); }

  .ds-prev-days-row {
    display: flex; align-items: center; gap: 5px; margin-top: 3px;
  }
  .ds-prev-days-input {
    width: 32px; padding: 2px 3px; border: 1px solid var(--border);
    border-radius: 4px; font-size: 11px; text-align: center;
    color: var(--brand-navy); background: var(--card-bg);
  }
  .ds-prev-days-label { font-size: 10px; color: var(--text-muted); }

  .ds-prev-main {
    flex: 1; display: flex; flex-direction: column;
    padding: 12px; gap: 6px;
  }

  .ds-prev-today-btn {
    align-self: flex-start; padding: 3px 12px;
    border: 1px solid var(--brand-blue); border-radius: 8px;
    background: transparent; color: var(--brand-blue);
    font-family: var(--font); font-size: 12px; font-weight: 600; cursor: pointer;
  }
  .ds-prev-today-btn:hover { background: var(--brand-blue); color: #fff; }

  .ds-prev-input-row { display: flex; gap: 8px; }
  .ds-prev-date-input {
    flex: 1; padding: 4px 8px; border: 1px solid var(--border);
    border-radius: 4px; font-family: var(--font); font-size: 12px;
    color: var(--brand-navy); background: var(--card-bg);
  }

  .ds-prev-nav { display: flex; align-items: center; gap: 6px; justify-content: center; }
  .ds-prev-nav button {
    width: 26px; height: 26px; border: none; border-radius: 4px;
    background: transparent; color: var(--brand-navy); font-size: 13px; cursor: pointer;
  }
  .ds-prev-nav button:hover { background: rgba(0,83,154,0.10); }
  .ds-prev-nav select {
    padding: 2px 4px; border: 1px solid var(--border); border-radius: 4px;
    font-family: var(--font); font-size: 12px; color: var(--brand-navy);
    background: var(--card-bg); cursor: pointer;
  }

  .ds-prev-day-headers {
    display: grid; grid-template-columns: repeat(7, 1fr);
    text-align: center; font-size: 11px; font-weight: 600; color: var(--text-muted);
  }
  .ds-prev-grid {
    display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px;
  }
  .ds-prev-cell {
    display: flex; align-items: center; justify-content: center;
    height: 26px; font-size: 12px; border-radius: 4px; cursor: pointer;
    transition: background 0.12s; user-select: none;
  }
  .ds-prev-cell:hover { background: rgba(0,83,154,0.10); }
  .ds-prev-cell.other { color: var(--text-muted); opacity: 0.45; }
  .ds-prev-cell.today { font-weight: 700; box-shadow: inset 0 0 0 2px var(--brand-blue); }
  .ds-prev-cell.in-range { background: rgba(253,185,69,0.22); border-radius: 0; }
  .ds-prev-cell.range-start {
    background: var(--brand-blue); color: #fff; border-radius: 4px 0 0 4px; font-weight: 600;
  }
  .ds-prev-cell.range-end {
    background: var(--brand-blue); color: #fff; border-radius: 0 4px 4px 0; font-weight: 600;
  }

  @keyframes ds-dropdown-anim {
    from { opacity: 0; transform: translateY(-4px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* ── Animations ── */

  /* Cards fade + slide up on load */
  .kpi-card, .mini-card {
    opacity: 0;
    transform: translateY(18px);
    animation: cardIn 0.5s ease forwards;
  }
  .kpi-card:nth-child(1), .mini-card:nth-child(1) { animation-delay: 0.05s; }
  .kpi-card:nth-child(2), .mini-card:nth-child(2) { animation-delay: 0.15s; }
  .kpi-card:nth-child(3), .mini-card:nth-child(3) { animation-delay: 0.25s; }
  .kpi-card:nth-child(4), .mini-card:nth-child(4) { animation-delay: 0.35s; }
  .mini-card:nth-child(5) { animation-delay: 0.45s; }
  .mini-card:nth-child(6) { animation-delay: 0.55s; }

  @keyframes cardIn {
    to { opacity: 1; transform: translateY(0); }
  }

  /* Sparkline draws in */
  .kpi-card__sparkline polyline {
    stroke-dasharray: 400;
    stroke-dashoffset: 400;
    animation: drawLine 1.4s ease forwards;
  }
  .kpi-card:nth-child(1) .kpi-card__sparkline polyline { animation-delay: 0.4s; }
  .kpi-card:nth-child(2) .kpi-card__sparkline polyline { animation-delay: 0.5s; }
  .kpi-card:nth-child(3) .kpi-card__sparkline polyline { animation-delay: 0.6s; }
  .kpi-card:nth-child(4) .kpi-card__sparkline polyline { animation-delay: 0.7s; }

  /* Area fill fades in after line draws */
  .kpi-card__sparkline polygon {
    opacity: 0;
    animation: areaFade 0.6s ease forwards;
  }
  .kpi-card:nth-child(1) .kpi-card__sparkline polygon { animation-delay: 1.2s; }
  .kpi-card:nth-child(2) .kpi-card__sparkline polygon { animation-delay: 1.3s; }
  .kpi-card:nth-child(3) .kpi-card__sparkline polygon { animation-delay: 1.4s; }
  .kpi-card:nth-child(4) .kpi-card__sparkline polygon { animation-delay: 1.5s; }

  @keyframes drawLine {
    to { stroke-dashoffset: 0; }
  }

  @keyframes areaFade {
    to { opacity: 1; }
  }

  /* Value count-up uses a pop effect (JS does the number ticking) */
  .kpi-card__value, .mini-card__value {
    transition: transform 0.15s ease;
  }
  .kpi-card__value.tick, .mini-card__value.tick {
    transform: scale(1.06);
  }

  /* Variance arrow bounce */
  .kpi-card__variance .arrow, .mini-card__variance .arrow {
    display: inline-block;
    opacity: 0;
    animation: arrowBounce 0.4s ease forwards;
  }
  .kpi-card:nth-child(1) .arrow { animation-delay: 0.6s; }
  .kpi-card:nth-child(2) .arrow { animation-delay: 0.7s; }
  .kpi-card:nth-child(3) .arrow { animation-delay: 0.8s; }
  .kpi-card:nth-child(4) .arrow { animation-delay: 0.9s; }
  .mini-card:nth-child(1) .arrow { animation-delay: 0.6s; }
  .mini-card:nth-child(2) .arrow { animation-delay: 0.7s; }
  .mini-card:nth-child(3) .arrow { animation-delay: 0.8s; }
  .mini-card:nth-child(4) .arrow { animation-delay: 0.9s; }
  .mini-card:nth-child(5) .arrow { animation-delay: 1.0s; }
  .mini-card:nth-child(6) .arrow { animation-delay: 1.1s; }

  @keyframes arrowBounce {
    0%   { opacity: 0; transform: translateY(6px) scale(0.6); }
    60%  { opacity: 1; transform: translateY(-3px) scale(1.15); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
  }
</style>
</head>
<body>

<h1>Power BI Custom Visuals</h1>
<p class="subtitle">Custom visuals — preview with sample data</p>

<!-- ── SINGLE CARDS ── -->
<div class="section-label">Visual 1 — Single KPI Card</div>

<div class="single-cards-row">

  <!-- Revenue -->
  <div class="kpi-card">
    <div class="kpi-card__title">Revenue</div>
    <div class="kpi-card__value">$2.4M</div>
    <div class="kpi-card__variance pos">
      <span class="arrow">&#9650;</span>
      <span>+12.3%</span>
      <span class="target">vs $2.1M</span>
    </div>
    <svg class="kpi-card__sparkline" viewBox="0 0 200 40" preserveAspectRatio="none">
      <polygon points="2,40 2,32 28,28 56,30 84,22 112,18 140,20 168,12 198,8 198,40"
               fill="#00539A" opacity="0.08"/>
      <polyline points="2,32 28,28 56,30 84,22 112,18 140,20 168,12 198,8"
                fill="none" stroke="#00539A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>

  <!-- Profit Margin -->
  <div class="kpi-card">
    <div class="kpi-card__title">Profit Margin</div>
    <div class="kpi-card__value">18.7%</div>
    <div class="kpi-card__variance neg">
      <span class="arrow">&#9660;</span>
      <span>-2.1%</span>
      <span class="target">vs 20.8%</span>
    </div>
    <svg class="kpi-card__sparkline" viewBox="0 0 200 40" preserveAspectRatio="none">
      <polygon points="2,40 2,10 28,14 56,12 84,18 112,22 140,26 168,30 198,32 198,40"
               fill="#00539A" opacity="0.08"/>
      <polyline points="2,10 28,14 56,12 84,18 112,22 140,26 168,30 198,32"
                fill="none" stroke="#00539A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>

  <!-- Active Users -->
  <div class="kpi-card">
    <div class="kpi-card__title">Active Users</div>
    <div class="kpi-card__value">84.2K</div>
    <div class="kpi-card__variance pos">
      <span class="arrow">&#9650;</span>
      <span>+8.5%</span>
      <span class="target">vs 77.6K</span>
    </div>
    <svg class="kpi-card__sparkline" viewBox="0 0 200 40" preserveAspectRatio="none">
      <polygon points="2,40 2,34 28,30 56,28 84,26 112,24 140,18 168,14 198,10 198,40"
               fill="#00539A" opacity="0.08"/>
      <polyline points="2,34 28,30 56,28 84,26 112,24 140,18 168,14 198,10"
                fill="none" stroke="#00539A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>

  <!-- NPS Score -->
  <div class="kpi-card">
    <div class="kpi-card__title">NPS Score</div>
    <div class="kpi-card__value">72</div>
    <div class="kpi-card__variance pos">
      <span class="arrow">&#9650;</span>
      <span>+5.9%</span>
      <span class="target">vs 68</span>
    </div>
    <svg class="kpi-card__sparkline" viewBox="0 0 200 40" preserveAspectRatio="none">
      <polygon points="2,40 2,28 28,26 56,30 84,24 112,20 140,22 168,16 198,12 198,40"
               fill="#00539A" opacity="0.08"/>
      <polyline points="2,28 28,26 56,30 84,24 112,20 140,22 168,16 198,12"
                fill="none" stroke="#00539A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>

</div>

<!-- ── MULTI CARD GRID ── -->
<div class="section-label">Visual 2 — Multi-KPI Card (single visual)</div>

<div class="multi-grid">

  <div class="mini-card">
    <div class="mini-card__title">Revenue</div>
    <div class="mini-card__value">$2.4M</div>
    <div class="mini-card__variance pos">
      <span class="arrow">&#9650;</span> +12.3%
    </div>
  </div>

  <div class="mini-card">
    <div class="mini-card__title">COGS</div>
    <div class="mini-card__value">$1.6M</div>
    <div class="mini-card__variance neg">
      <span class="arrow">&#9660;</span> -3.4%
    </div>
  </div>

  <div class="mini-card">
    <div class="mini-card__title">Margin</div>
    <div class="mini-card__value">18.7%</div>
    <div class="mini-card__variance neg">
      <span class="arrow">&#9660;</span> -2.1%
    </div>
  </div>

  <div class="mini-card">
    <div class="mini-card__title">Users</div>
    <div class="mini-card__value">84.2K</div>
    <div class="mini-card__variance pos">
      <span class="arrow">&#9650;</span> +8.5%
    </div>
  </div>

  <div class="mini-card">
    <div class="mini-card__title">Churn</div>
    <div class="mini-card__value">3.2%</div>
    <div class="mini-card__variance pos">
      <span class="arrow">&#9650;</span> +0.8%
    </div>
  </div>

  <div class="mini-card">
    <div class="mini-card__title">NPS</div>
    <div class="mini-card__value">72</div>
    <div class="mini-card__variance pos">
      <span class="arrow">&#9650;</span> +5.9%
    </div>
  </div>

</div>

<!-- ── DATE SLICER ── -->
<div class="section-label" style="margin-top: 48px;">Visual 3 — Date Slicer / Date Picker</div>

<div class="ds-preview-wrapper">
  <!-- Sidebar -->
  <div class="ds-prev-sidebar">
    <div class="ds-prev-toggle-row">
      <input type="checkbox" checked>
      <span>Date Range</span>
    </div>
    <button class="ds-prev-preset">Yesterday</button>
    <button class="ds-prev-preset">Today</button>
    <button class="ds-prev-preset">Min Date</button>
    <button class="ds-prev-preset active">This Week</button>
    <button class="ds-prev-preset">Last Week</button>
    <button class="ds-prev-preset">This Month</button>
    <div class="ds-prev-days-row">
      <input class="ds-prev-days-input" type="number" value="7" min="1">
      <span class="ds-prev-days-label">days up to today</span>
    </div>
    <div class="ds-prev-days-row">
      <input class="ds-prev-days-input" type="number" value="7" min="1">
      <span class="ds-prev-days-label">days starting today</span>
    </div>
  </div>
  <!-- Main Panel -->
  <div class="ds-prev-main">
    <button class="ds-prev-today-btn">Today</button>
    <div class="ds-prev-input-row">
      <input class="ds-prev-date-input" type="text" value="02/23/2026" readonly>
      <input class="ds-prev-date-input" type="text" value="03/01/2026" readonly>
    </div>
    <div class="ds-prev-nav">
      <button>&#10094;</button>
      <select><option>February</option></select>
      <select><option>2026</option></select>
      <button>&#10095;</button>
    </div>
    <div class="ds-prev-day-headers">
      <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
    </div>
    <div class="ds-prev-grid" id="ds-cal-grid"></div>
  </div>
</div>

<!-- ── DATE SLICER COMPACT ── -->
<div class="section-label" style="margin-top: 48px;">Visual 3b — Date Slicer (Compact / Dropdown)</div>

<div style="display: flex; flex-direction: column; gap: 16px; max-width: 360px; opacity: 0; transform: translateY(18px); animation: cardIn 0.5s ease forwards; animation-delay: 0.15s;">
  <!-- Pill collapsed -->
  <div class="ds-prev-pill" id="ds-compact-pill" style="
    display: flex; align-items: center; gap: 8px;
    padding: 8px 14px; border-radius: 8px;
    border: 1px solid var(--border); background: var(--card-bg);
    cursor: pointer; font-family: var(--font); user-select: none;
    transition: border-color 0.15s, box-shadow 0.15s;
  ">
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" style="flex-shrink: 0; color: var(--brand-blue);">
      <rect x="1" y="2" width="14" height="13" rx="2" stroke="currentColor" stroke-width="1.5" fill="none"/>
      <line x1="1" y1="6" x2="15" y2="6" stroke="currentColor" stroke-width="1.5"/>
      <line x1="5" y1="1" x2="5" y2="3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      <line x1="11" y1="1" x2="11" y2="3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
    </svg>
    <span style="flex: 1; font-size: 12px; font-weight: 600; color: var(--brand-navy); white-space: nowrap;">02/23/2026 &mdash; 03/01/2026</span>
    <span id="ds-compact-chevron" style="font-size: 12px; color: var(--text-muted); transition: transform 0.2s ease;">&#9662;</span>
  </div>

  <!-- Dropdown panel (toggled by clicking pill) -->
  <div id="ds-compact-dropdown" style="
    display: none; position: relative;
    min-width: 480px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    border: 1px solid var(--border); border-radius: 12px;
    background: var(--card-bg); overflow: hidden;
    animation: ds-dropdown-anim 0.15s ease;
  ">
    <div class="ds-preview-wrapper" style="
      width: 100%; height: 320px; border: none; border-radius: 0;
      box-shadow: none; opacity: 1; transform: none; animation: none;
    ">
      <div class="ds-prev-sidebar">
        <div class="ds-prev-toggle-row">
          <input type="checkbox" checked>
          <span>Date Range</span>
        </div>
        <button class="ds-prev-preset">Yesterday</button>
        <button class="ds-prev-preset">Today</button>
        <button class="ds-prev-preset">Min Date</button>
        <button class="ds-prev-preset active">This Week</button>
        <button class="ds-prev-preset">Last Week</button>
        <button class="ds-prev-preset">This Month</button>
        <div class="ds-prev-days-row">
          <input class="ds-prev-days-input" type="number" value="7" min="1">
          <span class="ds-prev-days-label">days up to today</span>
        </div>
        <div class="ds-prev-days-row">
          <input class="ds-prev-days-input" type="number" value="7" min="1">
          <span class="ds-prev-days-label">days starting today</span>
        </div>
      </div>
      <div class="ds-prev-main">
        <button class="ds-prev-today-btn">Today</button>
        <div class="ds-prev-input-row">
          <input class="ds-prev-date-input" type="text" value="02/23/2026" readonly>
          <input class="ds-prev-date-input" type="text" value="03/01/2026" readonly>
        </div>
        <div class="ds-prev-nav">
          <button>&#10094;</button>
          <select><option>February</option></select>
          <select><option>2026</option></select>
          <button>&#10095;</button>
        </div>
        <div class="ds-prev-day-headers">
          <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
        </div>
        <div class="ds-prev-grid" id="ds-cal-grid-compact"></div>
      </div>
    </div>
  </div>
</div>

<!-- ── Footer ── -->
<div class="footer">
  Brand palette
  <div class="swatch-row">
    <div class="swatch" style="background:#00539A" title="#00539A Blue"></div>
    <div class="swatch" style="background:#11284C" title="#11284C Navy"></div>
    <div class="swatch" style="background:#004896" title="#004896 Blue2"></div>
    <div class="swatch" style="background:#FDB945" title="#FDB945 Gold"></div>
    <div class="swatch" style="background:#0E7C3A" title="#0E7C3A Positive"></div>
    <div class="swatch" style="background:#B42318" title="#B42318 Negative"></div>
  </div>
</div>

<script>
// Generate Date Slicer calendar grid for February 2026
(() => {
  const grid = document.getElementById('ds-cal-grid');
  if (!grid) return;

  // Feb 2026 starts on Sunday (day 0)
  // Range: Mon 23 Feb – Sun 1 Mar (This Week with Sun start = Feb 22–28)
  const rangeStart = 23; // Feb 23 (Mon)
  const rangeEnd = 28;   // Feb 28 + Mar 1
  const todayDate = 25;  // Feb 25
  const daysInFeb = 28;

  // Jan fill (Feb 1 2026 = Sunday, so no leading days needed)
  // Actually Feb 1 2026 is a Sunday — grid starts on Sunday
  for (let d = 1; d <= daysInFeb; d++) {
    const cell = document.createElement('div');
    cell.className = 'ds-prev-cell';
    cell.textContent = d;
    if (d === todayDate) cell.classList.add('today');
    if (d >= rangeStart && d <= rangeEnd) cell.classList.add('in-range');
    if (d === rangeStart) cell.classList.add('range-start');
    if (d === rangeEnd) cell.classList.add('range-end');
    grid.appendChild(cell);
  }
  // March fill days (Mar 1 is range end in this week scenario)
  for (let d = 1; d <= 7; d++) {
    const cell = document.createElement('div');
    cell.className = 'ds-prev-cell other';
    cell.textContent = d;
    if (d === 1) { cell.classList.add('in-range'); cell.classList.add('range-end'); cell.classList.remove('other'); }
    grid.appendChild(cell);
  }
})();

// Generate compact mode calendar grid (same as expanded)
(() => {
  const grid = document.getElementById('ds-cal-grid-compact');
  if (!grid) return;
  const rangeStart = 23, rangeEnd = 28, todayDate = 25, daysInFeb = 28;
  for (let d = 1; d <= daysInFeb; d++) {
    const cell = document.createElement('div');
    cell.className = 'ds-prev-cell';
    cell.textContent = d;
    if (d === todayDate) cell.classList.add('today');
    if (d >= rangeStart && d <= rangeEnd) cell.classList.add('in-range');
    if (d === rangeStart) cell.classList.add('range-start');
    if (d === rangeEnd) cell.classList.add('range-end');
    grid.appendChild(cell);
  }
  for (let d = 1; d <= 7; d++) {
    const cell = document.createElement('div');
    cell.className = 'ds-prev-cell other';
    cell.textContent = d;
    if (d === 1) { cell.classList.add('in-range'); cell.classList.add('range-end'); cell.classList.remove('other'); }
    grid.appendChild(cell);
  }
})();

// Compact pill toggle
(() => {
  const pill = document.getElementById('ds-compact-pill');
  const dropdown = document.getElementById('ds-compact-dropdown');
  const chevron = document.getElementById('ds-compact-chevron');
  if (!pill || !dropdown || !chevron) return;
  let open = false;
  pill.addEventListener('click', () => {
    open = !open;
    dropdown.style.display = open ? 'block' : 'none';
    chevron.style.transform = open ? 'rotate(180deg)' : '';
  });
  document.addEventListener('click', (e) => {
    if (open && !pill.contains(e.target) && !dropdown.contains(e.target)) {
      open = false;
      dropdown.style.display = 'none';
      chevron.style.transform = '';
    }
  });
  pill.addEventListener('mouseenter', () => { pill.style.borderColor = 'var(--brand-blue)'; pill.style.boxShadow = '0 0 0 1px var(--brand-blue)'; });
  pill.addEventListener('mouseleave', () => { if (!open) { pill.style.borderColor = ''; pill.style.boxShadow = ''; } });
})();

// Count-up animation for all value elements
document.addEventListener('DOMContentLoaded', () => {
  const valueEls = document.querySelectorAll('.kpi-card__value, .mini-card__value');

  valueEls.forEach((el, i) => {
    const raw = el.textContent.trim();
    const finalText = raw;

    // Parse the number, prefix ($) and suffix (M, K, %)
    const match = raw.match(/^([^0-9\-]*)(-?[\d.]+)(.*)$/);
    if (!match) return;

    const prefix = match[1];
    const targetNum = parseFloat(match[2]);
    const suffix = match[3];
    const decimals = match[2].includes('.') ? match[2].split('.')[1].length : 0;

    el.textContent = prefix + '0' + suffix;

    const delay = 300 + i * 120;
    const duration = 900;
    const startTime = performance.now() + delay;

    function easeOut(t) {
      return 1 - Math.pow(1 - t, 3);
    }

    function step(now) {
      if (now < startTime) { requestAnimationFrame(step); return; }
      const elapsed = now - startTime;
      const progress = Math.min(elapsed / duration, 1);
      const easedProgress = easeOut(progress);
      const current = targetNum * easedProgress;

      el.textContent = prefix + current.toFixed(decimals) + suffix;

      // Subtle scale pulse during counting
      if (progress < 1) {
        el.classList.add('tick');
        setTimeout(() => el.classList.remove('tick'), 80);
        requestAnimationFrame(step);
      } else {
        el.textContent = finalText;
        el.classList.remove('tick');
      }
    }

    requestAnimationFrame(step);
  });
});
</script>

</body>
</html>
